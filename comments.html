<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head profile="http://gmpg.org/xfn/11">


	<title>object allocations on the web « Snax</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="index_files/blank.css" type="text/css" media="screen">
	<link rel="pingback" href="http://evanweaver.wordpress.com/xmlrpc.php">
		<link rel="alternate" type="application/rss+xml" title="Snax » Feed" href="http://evanweaver.wordpress.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Snax » Comments Feed" href="http://evanweaver.wordpress.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Snax » object allocations on the&nbsp;web Comments Feed" href="http://evanweaver.wordpress.com/2010/11/30/object-allocations-on-the-web-2/feed/">
<script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel="stylesheet" href="index_files/global.css" type="text/css">
<script type="text/javascript" src="index_files/l10n.js"></script>
<script type="text/javascript" src="index_files/jquery.js"></script>
<script type="text/javascript" src="index_files/comment-reply.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://evanweaver.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://evanweaver.wordpress.com/wp-includes/wlwmanifest.xml"> 
<link rel="index" title="Snax" href="http://evanweaver.wordpress.com/">
<link rel="prev" title="scribe&nbsp;client" href="http://evanweaver.wordpress.com/2010/11/30/scribe-client-gem-2/">
<link rel="next" title="distributed systems primer,&nbsp;updated" href="http://evanweaver.wordpress.com/2010/11/30/distributed-systems-primer-update-2/">
<meta name="generator" content="WordPress.com">
<link rel="canonical" href="http://evanweaver.wordpress.com/2010/11/30/object-allocations-on-the-web-2/">
<link rel="shortlink" href="http://wp.me/p1dOab-4L">
<link rel="shortcut icon" type="image/x-icon" href="http://s1.wp.com/i/favicon-stacked.ico?m=1284002170g" sizes="16x16 24x24 32x32 48x48">
<link rel="icon" type="image/x-icon" href="http://s1.wp.com/i/favicon-stacked.ico?m=1284002170g" sizes="16x16 24x24 32x32 48x48">
<link rel="apple-touch-icon" href="http://s0.wp.com/wp-content/themes/h4/i/webclip.png?m=1250548519g">
	<style type="text/css">
	/* <![CDATA[ */
				div#likes { margin-top: 15px; }
		.like-button { border: 1px solid #eee; padding: 2px 6px; font-size: 13px; font-family: arial, tahoma, sans-serif; }
		#wpl-likebox { clear: left; font-size: 11px; font-family: arial, tahoma, verdana, sans-serif !important; min-height: 30px; margin: 10px 0 !important; padding: 5px 0 10px 0 !important; }
		#wpl-button { float: left; background: url( /i/buttonbg.png ) top left repeat-x; margin-right: 7px; border: 1px solid #d4d4d4; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; }
		#wpl-button a { color: #666 !important; line-height: 130% !important; text-decoration: none !important; outline: none; float: left; padding: 3px 6px 2px 24px !important; font-size: 11px !important; background: url( /i/likestar.png ) 6px 49.8% no-repeat; }
		#wpl-button.liked { background: #feffce; border: 1px solid #f3e389; }
		#wpl-button.liked a { color: #ba871b !important; }
		#wpl-likebox #wpl-count { min-height: 25px; line-height: 130% !important; float: left; padding-top: 4px; }
		#wpl-likebox #wpl-avatars { clear: left; max-height: 98px; overflow: hidden; margin-top: 15px; line-height: 130% !important; }
		#wpl-likebox #wpl-avatars img { border: none !important; }
		#wpl-likebox #wpl-mustlogin { line-height: 14px !important; font-size: 11px; clear: left; margin-top: 5px; background: #f0f0f0; padding: 10px; width: 65%; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; }
		#wpl-likebox #wpl-mustlogin a { color: #888; text-decoration: underline; }
		#wpl-likebox #wpl-mustlogin p { margin: 5px 0; padding: 0 }
		#wpl-likebox #wpl-mustlogin input.input { padding: 2px; background: #fff; font-size: 11px; font-family: inherit; border: 1px solid #ccc; -moz-box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1) inset; -webkit-box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1) inset; line-height: 12px; }
		#wpl-likebox #wpl-mustlogin input#wp-submit { border: 1px solid #ccc; font-size: 11px; background: #fafafa; repeat-x; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; padding: 2px 4px !important; line-height: 12px; }
		#wpl-likebox #wpl-mustlogin label { position: relative; cursor: text; }
		#wpl-likebox #wpl-mustlogin label span { position: absolute; top: 0px; left: 5px; padding: 0 !important; }
		#wpl-likebox #wpl-mustlogin label span { top /*\**/: -10px\9; }
	/* ]]> */
	</style>
	<link rel="openid.server" href="http://evanweaver.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="http://evanweaver.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="http://evanweaver.wordpress.com/osd.xml" title="Snax">
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com">
<meta name="application-name" content="Snax"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-tooltip" content="a big website blog"><meta name="msapplication-task" content="name=Subscribe;action-uri=http://evanweaver.wordpress.com/feed/;icon-uri=http://s1.wp.com/i/favicon-stacked.ico"><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico">
	<link rel="stylesheet" type="text/css" href="index_files/a.css">
<link rel="stylesheet" type="text/css" id="gravatar-card-css" href="index_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="index_files/services.css"></head><body class="wordpress y2010 m12 d06 h00 single postid-295 s-y2010 s-m11 s-d29 s-h18 s-category-uncategorized s-author-evanweaver">

<div id="wrapper" class="hfeed">

	<div id="header">
		<h1 id="blog-title"><span><a href="http://evanweaver.wordpress.com/" title="Snax" rel="home">Snax</a></span></h1>
		<div id="blog-description">a big website blog</div>
	</div><!--  #header -->

	<div id="access">
		<div class="skip-link"><a href="#content" title="Skip to content">Skip to content</a></div>
		<div id="menu"><ul><li class="page_item page-item-2"><a href="http://evanweaver.wordpress.com/about/" title="About">About</a></li></ul></div>
	</div><!-- #access -->

	<div id="container">
		<div id="content">


			<div id="nav-above" class="navigation">
				<div class="nav-previous"><a href="http://evanweaver.wordpress.com/2010/11/30/scribe-client-gem-2/" rel="prev"><span class="meta-nav">«</span> scribe&nbsp;client</a></div>
				<div class="nav-next"><a href="http://evanweaver.wordpress.com/2010/11/30/distributed-systems-primer-update-2/" rel="next">distributed systems primer,&nbsp;updated <span class="meta-nav">»</span></a></div>
			</div>

			<div id="post-295" class="hentry p1 post publish author-evan category-uncategorized untagged y2010 m11 d29 h18">
				<h2 class="entry-title">object allocations on the&nbsp;web</h2>
				<div class="entry-content">
<p>How many objects does a Rails request allocate? Here are Twitter’s numbers:</p>
<ul>
<li><b>API</b>: 22,700 objects per request</li>
<li><b>Website</b>: 67,500 objects per request </li>
<li><b>Daemons</b>: 27,900 objects per action</li>
</ul>
<p>I want them to be lower. Overall, we burn 20% of our front-end CPU on
 garbage collection, which seems high. Each process handles ~29,000 
requests before getting killed by the memory limit, and the GC is 
triggered about every 30 requests.</p>
<p>In memory-managed languages, you pay a performance penalty at object 
allocation time and also at collection time. Since Ruby lacks a 
generational GC (although there are <a href="http://github.com/authorNari/patch_bag/blob/master/ruby/gc_partial_longlife_r23386.patch">patches</a> available), the collection penalty is linear with the number of objects on the heap.</p>
<h2>a note about structs and immediates</h2>
<p>In Ruby 1.8, <code>Struct</code> instances <a href="http://eigenclass.org/R2/writings/object-size-ruby-ocaml">use fewer bytes</a> and allocate less objects than<br>
<code>Hash</code> and friends. This can be an optimization opportunity in circumstances where the <code>Struct</code> class is reusable.</p>
<p>A little bit of code shows the difference (you need <a href="http://www.rubyenterpriseedition.com/">REE</a> or Sylvain Joyeux’s <a href="http://rubyforge.org/tracker/download.php/426/1700/11497/2087/ruby-track-alloc.patch">patch</a> to track allocations):</p>
<pre>GC.enable_stats
def sizeof(obj)
  GC.clear_stats
  obj.clone
  puts "#{GC.num_allocations} allocations"
  GC.clear_stats
  obj.clone
  puts "#{GC.allocated_size} bytes"
end
</pre>
<p>Let’s try it:</p>
<pre>&gt;&gt; Struct.new("Test", :a, :b, :c)
&gt;&gt; struct = Struct::Test.new(1,2,3)
=&gt; #&lt;struct Struct::Test a=1, b=2, c=3&gt;
&gt;&gt; sizeof(struct)
1 allocations
24 bytes

&gt;&gt; hash = {:a =&gt; 1, :b =&gt; 2, :c =&gt; 3}
&gt;&gt; sizeof(hash)
5 allocations
208 bytes
</pre>
<p>Watch out, though. The <code>Struct</code> class itself is expensive:</p>
<pre>&gt;&gt; sizeof(Struct::Test)
29 allocations
1216 bytes
</pre>
<p>In my understanding, each key in a <code>Hash</code> is a <code>VALUE</code> pointer to another object, while each slot in a <code>Struct</code> is merely a named position.</p>
<p>Immediate types (<code>Fixnum</code>, <code>nil</code>, <code>true</code>, <code>false</code>, and <code>Symbol</code>) don’t allocate, except for <code>Symbol</code>. <code>Symbol</code> is interned and keeps its string representations on a special heap that is not garbage-collected.</p>
<h2>your turn</h2>
<p>If you have allocation counts from a production web application, I 
would be delighted to know them. I am especially interested in Python, 
PHP, and Java.</p>
<p>Python should be about the same as Ruby. PHP, though, discards the 
entire heap per-request in some configurations, so collection can be<br>
dramatically cheaper. And I would expect Java to allocate fewer objects and have a more efficient collection cycle.</p>

				</div>
				<div class="entry-meta">
					This entry was written by <span class="author vcard"><a class="url fn n" href="http://evanweaver.wordpress.com/author/evanweaver/" title="View all posts by evan">evan</a></span>, posted on <abbr class="published" title="2010-11-30T02:51:09-0800">November 30, 2010 at 2:51 AM</abbr>, filed under <a href="http://evanweaver.wordpress.com/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://evanweaver.wordpress.com/2010/11/30/object-allocations-on-the-web-2/" title="Permalink to object allocations on the&nbsp;web" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://evanweaver.wordpress.com/2010/11/30/object-allocations-on-the-web-2/feed/" title="Comments RSS to object allocations on the&nbsp;web" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					Both comments and trackbacks are currently closed.
				</div>
			</div><!-- .post -->

			<div id="nav-below" class="navigation">
				<div class="nav-previous"><a href="http://evanweaver.wordpress.com/2010/11/30/scribe-client-gem-2/" rel="prev"><span class="meta-nav">«</span> scribe&nbsp;client</a></div>
				<div class="nav-next"><a href="http://evanweaver.wordpress.com/2010/11/30/distributed-systems-primer-update-2/" rel="next">distributed systems primer,&nbsp;updated <span class="meta-nav">»</span></a></div>
			</div>

			<div id="comments">


		<div id="comments-list" class="comments">
		<h3><span>6</span> Comments</h3>
		<ol>
									<li id="comment-1589" class="comment c c-y-0001 c-m11 c-d29 c-h16 alt">
							<div class="comment-author vcard"> <span class="fn n"><a href="http://twitter.com/binary42" rel="external nofollow" class="url url">Brian Mitchell</a></span></div>
							<div class="comment-meta">Posted December 6, 2010 at 12:52 AM <span class="meta-sep">|</span> <a href="#comment-1589" title="Permalink to this comment">Permalink</a></div>
							<p>Generally allocations take a lot of time on their own.<br>
Freeing these allocations is also a problem. For example, I had a small bit of code where it would run N iterations per<br>
second, but if I allocated an array of a few million immediate values 
(large but not huge) the iterations on my benchmark dropped to about 
N/2. My<br>
code was only allocating about 10 objects per iteration. The reason for 
the drop is that some of these objects were rather large (10k or more in<br>
some cases).This deals with heap storage efficiency, suboptimal GC 
scanning, reallocation (a bigger problem than many consider when<br>
you just grow objects, which is almost as bad as allocating new ones), dead weight in the AST, etc.So it’s hard to quantify on<br>
just the<br>
measurement of allocations. In Java, for example, the copying collectors
 can do very very cheap allocation of short lived objects so it might<br>
allocate many objects but use something like the semispace GC technique 
to keep scanning overhead to a minimum.When I tune my Ruby<br>
apps I check allocations first as they trigger the GC. But the GC still fires and it still needs to be fast, so the next<br>
step is to lighten things because you might not allocate a lot but the GC time doesn’t disappear.To improve<br>
GC runtime itself, I recommend avoiding large amounts of rarely 
used/dead code. Just don’t load code you don’t need. ActiveSupport did a
 good<br>
thing<br>
by making things lazily loaded but also allowing loaded code to be 
trashed is a good idea if you know you are done. Next, check for objects
 you<br>
rarely touch or use and decide if they should be there at all.I’m 
surprised at how much GC time can grow, but a 200+ MB heap just<br>
sucks so I try to design apps around working below that number. If it 
goes above that I try to refactor the application into services. Small<br>
things running<br>
around or under 100MB will do much better. If they leak or grow to large
 to often, then cut down start up time so you can fork new<br>
workers and kill off large processes. Not pretty and I don’t recommend killing rapidly but it works and it improves<br>
performance.Anyway, those are my thoughts. Thanks for the post. I’ll try
 to collect some numbers on apps I have here sometime but<br>
life is busy and it takes time to setup a clean environment for measurement. And now I get to pack, yay for moving. ;-)</p>
</li>
						<li id="comment-1590" class="comment c1 c-y-0001 c-m11 c-d29 c-h16">
							<div class="comment-author vcard"> <span class="fn n"><a href="http://fishbowl.pastiche.org/" rel="external nofollow" class="url url">Charles Miller</a></span></div>
							<div class="comment-meta">Posted December 6, 2010 at 12:52 AM <span class="meta-sep">|</span> <a href="#comment-1590" title="Permalink to this comment">Permalink</a></div>
							<p>Working in Java, the cost of allocating short-lived objects is
 really small. Allocation just involves pushing a pointer in eden 
forward sizeof(object), and the vast majority of those objects are 
reclaimed by the young-generation copying collector. For this reason, I 
would expect a well-written Java app to allocate more objects than an 
equally well-written Ruby app, simply because developers can worry less 
about the cost of doing so.</p>
</li>
						<li id="comment-1591" class="comment c2 c-y-0001 c-m11 c-d29 c-h16 alt">
							<div class="comment-author vcard"> <span class="fn n"><a href="http://moonbase.rydia.net/" rel="external nofollow" class="url url">MenTaLguY</a></span></div>
							<div class="comment-meta">Posted December 6, 2010 at 12:52 AM <span class="meta-sep">|</span> <a href="#comment-1591" title="Permalink to this comment">Permalink</a></div>
							<p>One advantage to JRuby, of course, is that you get to write in
 Ruby but take advantage of all the Java runtime infrastructure like the
 garbage collector.But even there, the less garbage, the better.</p>
</li>
						<li id="comment-1592" class="comment c3 c-y-0001 c-m11 c-d29 c-h16">
							<div class="comment-author vcard"> <span class="fn n"><a href="http://reformatic.com/" rel="external nofollow" class="url url">Andrew</a></span></div>
							<div class="comment-meta">Posted December 6, 2010 at 12:52 AM <span class="meta-sep">|</span> <a href="#comment-1592" title="Permalink to this comment">Permalink</a></div>
							<p>On a somewhat related note, I have been experimenting with an <a href="http://martinfowler.com/eaaCatalog/identityMap.html" rel="nofollow">IdentityMap</a> in<br>
rails.</p>
<p>Here is my incomplete, minimally tested and not ready for production code: <a href="http://gist.github.com/215925" rel="nofollow">http://gist.github.com/215925</a>. From the tests I have made with<br>
this, the requests are quicker (less allocations of AR::Base and all of 
the objects related to instantiating a model) and there is no need for a
 reload<br>
method (less DB hits).This is more useful in an app where are a lot of 
circular relationships that all get loaded in the same request. But it 
will also help in the case that the same object gets loaded for each 
object in a collection. For example, a collection of Book objects may 
all share the same Author object. With the identity_map all of the 
Authors that have the same record id will be exactly the same object, no
 duplicates.</p>
</li>
						<li id="comment-1593" class="comment c4 c-y-0001 c-m11 c-d29 c-h16 alt">
							<div class="comment-author vcard"> <span class="fn n"><a href="http://blog.methodmissing.com/" rel="external nofollow" class="url url">Lourens Naudé</a></span></div>
							<div class="comment-meta">Posted December 6, 2010 at 12:52 AM <span class="meta-sep">|</span> <a href="#comment-1593" title="Permalink to this comment">Permalink</a></div>
							<p>Interesting observations, however I do think in the current 
Ruby ecosystem it’s somewhat dangerous to focus on interpreter specific<br>
optimizations and not generalize solutions.I, along with a few coworkers, think the underlying issue is:a) The state of stdlib,<br>
and it being set in stone, pretty much moving forward. <code>lib/logger.rb</code> &amp; <code>lib/time.erb</code> specifically, given its widespread framework<br>
useb) Lack of<br>
either Ruby core or stdlib knowledge that leads to a cycle of 20 github 
repos all doing the same thing, but to varying degrees of efficiency.c)<br>
Framework authors/core contributors shooting patches down as “micro 
optimizations” I salute Merb and wycats for being totally anal about 
this—framework =<br>
critical path, always. I’ve experimented with allocations at the libc 
level some time ago (I understand it’s mostly the creation side of the<br>
equation) and many seems to think a mmap’ed region exclusively for strings could <a href="http://blog.methodmissing.com/2009/08/08/ruby-memory-allocation/" rel="nofollow">work<br>
wonders</a>.<br>
Runtime hints/hard raises for exceeding X<br>
allocations per<br>
method dispatch on class Y in a staging environment is interesting also.</p>
</li>
						<li id="comment-1594" class="comment c5 c-y-0001 c-m11 c-d29 c-h16">
							<div class="comment-author vcard"> <span class="fn n"><a href="http://www.javageneration.com/" rel="external nofollow" class="url url">Chaker Nakhli</a></span></div>
							<div class="comment-meta">Posted December 6, 2010 at 12:52 AM <span class="meta-sep">|</span> <a href="#comment-1594" title="Permalink to this comment">Permalink</a></div>
							<p>An interesting snippet from Daniel Berger transforms hashes to structs on the fly :
</p><pre>class Hash
   def to_struct(struct_name)
      Struct.new(struct_name,*keys).new(*values)
   end
end
</pre>
<p>Example usage:
</p><pre>foo = {:name=&gt;"Dan","age"=&gt;33}.to_struct("Foo")
puts "name:  #{foo.name}"
puts "age: #{foo.age}"
</pre>
<p>The snippet can be found <a href="http://rubyforge.org/snippet/detail.php?type=snippet&amp;id=1" rel="nofollow">here</a>.</p>
</li>
		</ol>

		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"></div>
		</div>
	</div><!-- #comments-list .comments -->

<div class="navigation">
  
</div>

			</div><!-- #comments -->

		</div><!-- #content -->
	</div><!-- #container -->

	<div id="primary" class="sidebar">
		<ul class="xoxo">

			<li id="nav_menu-2" class="widget widget_nav_menu">
				<h3 class="widgettitle">meta</h3>
<div class="menu-meta-container"><ul id="menu-meta" class="menu"><li id="menu-item-423" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-423"><a href="http://evanweaver.wordpress.com/about/">About</a></li>
<li id="menu-item-424" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-424"><a href="http://resume/">resume</a></li>
<li id="menu-item-425" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-425"><a href="https://github.com/fauna">github</a></li>
<li id="menu-item-426" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-426"><a href="http://cloudbur.st/">cloudburst</a></li>
<li id="menu-item-427" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-427"><a href="http://web2nam.es/">web2names</a></li>
</ul></div>
			</li>

			<li id="rss_links-2" class="widget widget_rss_links">
				<h3 class="widgettitle">subscribe</h3>
<p><a href="http://evanweaver.wordpress.com/feed/" title="Subscribe to Posts"><img src="index_files/orange-small.png" alt="RSS Feed"></a>&nbsp;<a href="http://evanweaver.wordpress.com/feed/" title="Subscribe to Posts">RSS - Posts</a></p><p><a href="http://evanweaver.wordpress.com/comments/feed/" title="Subscribe to Comments"><img src="index_files/orange-small.png" alt="RSS Feed"></a>&nbsp;<a href="http://evanweaver.wordpress.com/comments/feed/" title="Subscribe to Comments">RSS - Comments</a></p>

			</li>
		
			<li id="recent-posts-2" class="widget widget_recent_entries">		
				<h3 class="widgettitle">recent articles</h3>
		<ul>
				<li><a href="http://evanweaver.wordpress.com/2010/11/30/distributed-systems-primer-update-2/" title="distributed systems primer,&nbsp;updated">distributed systems primer,&nbsp;updated</a></li>
				<li><a href="http://evanweaver.wordpress.com/2010/11/30/object-allocations-on-the-web-2/" title="object allocations on the&nbsp;web">object allocations on the&nbsp;web</a></li>
				<li><a href="http://evanweaver.wordpress.com/2010/11/30/scribe-client-gem-2/" title="scribe&nbsp;client">scribe&nbsp;client</a></li>
				<li><a href="http://evanweaver.wordpress.com/2010/11/30/ree-2/" title="ree">ree</a></li>
				<li><a href="http://evanweaver.wordpress.com/2010/11/30/memcached-gem-release-2/" title="memcached gem&nbsp;release">memcached gem&nbsp;release</a></li>
				<li><a href="http://evanweaver.wordpress.com/2010/11/30/up-and-running-with-cassandra-2/" title="up and running with&nbsp;cassandra">up and running with&nbsp;cassandra</a></li>
				</ul>
		
			</li>
		
			<li id="top-posts" class="widget widget_stats_topposts">			
				<h3 class="widgettitle">popular</h3>
			<ul><li>None</li></ul>		
			</li>

			<li id="nav_menu-3" class="widget widget_nav_menu">
				<h3 class="widgettitle">projects</h3>
<div class="menu-big-projects-container"><ul id="menu-big-projects" class="menu"><li id="menu-item-428" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-428"><a href="http://blog.evanweaver.com/files/doc/fauna/memcached/files/README.html">memcached 1.0</a></li>
<li id="menu-item-429" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-429"><a href="http://blog.evanweaver.com/files/doc/fauna/zookeeper/files/README.html">zookeeper 0.3</a></li>
</ul></div>
			</li>
		</ul>
	</div><!-- #primary .sidebar -->

	<div id="secondary" class="sidebar">
		<ul class="xoxo">

			<li id="twitter-2" class="widget widget_twitter">
				<h3 class="widgettitle"><a href="http://twitter.com/evan">twitter</a></h3>
<ul class="tweets">
<li>Feeling really beat. Must have been all the Unreal Tournament last night. <a href="http://twitter.com/evan/statuses/11520327217582081" class="timesince">12&nbsp;hours&nbsp;ago</a></li>
<li>Overwhelmed by snowboard gear at Sports Basement. <a href="http://twitter.com/evan/statuses/11205189797150720" class="timesince">1&nbsp;day&nbsp;ago</a></li>
<li>Struggling with this annoying bug in @<a href="http://twitter.com/macspeech">macspeech</a>: <a href="http://t.co/cDNCd4q" rel="nofollow">http://t.co/cDNCd4q</a> <a href="http://twitter.com/evan/statuses/11158693190049792" class="timesince">1&nbsp;day&nbsp;ago</a></li>
<li>Got a little Christmas present from @<a href="http://twitter.com/priscilla">priscilla</a>. <a href="http://t.co/MqFAWTN" rel="nofollow">http://t.co/MqFAWTN</a> <a href="http://twitter.com/evan/statuses/11151840410345472" class="timesince">1&nbsp;day&nbsp;ago</a></li>
<li>Snaps! <a href="http://twitter.com/evan/statuses/10900275271303168" class="timesince">2&nbsp;days&nbsp;ago</a></li>
</ul>

			</li>
			
			<li id="search" class="widget widget_search">				
				<h3 class="widgettitle"><label for="s">search</label></h3>
				<form id="searchform" class="blog-search" method="get" action="http://evanweaver.wordpress.com">
					<div>
						<input id="s" name="s" class="text" size="10" tabindex="1" type="text">
						<input class="button" value="ok" tabindex="2" type="submit">
					</div>
				</form>
			
			</li>
		</ul>
	</div><!-- #secondary .sidebar -->

	<div id="footer">
		<span id="generator-link"><a href="http://wordpress.com/" rel="generator">Blog at WordPress.com</a>.</span>
		<span class="meta-sep">|</span>
		<span id="theme-link">Theme: <a href="http://www.plaintxt.org/themes/sandbox/" rel="designer">Sandbox 1.6.1</a>.</span>
	</div><!-- #footer -->

</div><!-- #wrapper .hfeed -->

<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script>	<script type="text/javascript">
	/* <![CDATA[ */
		jQuery( function() {
			
			jQuery('#wpl-button > a.like').click( function(e) {
				e.preventDefault();
				
				jQuery('#wpl-mustlogin').remove();

				jQuery.post( 'http://evanweaver.wordpress.com/wp-admin/admin-ajax.php', { 
					'action': 'wpl_record_stat',
					'stat_name': 'loggedout_like_click'
				} );

				var tenMins = new Date();
				tenMins.setTime( tenMins.getTime() + 600000 );
				document.cookie = 'wpl_rand=d1da19d381; expires=' + tenMins.toGMTString() + '; domain=wordpress.com; path=/;';
				
				jQuery('#wpl-count').after( '\
					<div id="wpl-mustlogin"> \
						<form action="http://evanweaver.wordpress.com/wp-login.php" method="post"> \
							<p>Just one more step to like this post:</p> \
							<label><span>Username</span> <input type="text" name="log" id="user_login" class="input" value="" size="20" tabindex="80" /></label> \
							<label><span>Password</span> <input type="password" name="pwd" id="user_pass" class="input" value="" size="20" tabindex="81" /></label> \
							<input type="submit" name="wp-submit" id="wp-submit" class="button-primary" value="Log In" tabindex="82" /> \
							<input type="hidden" name="redirect_to" value="http://evanweaver.wordpress.com/2010/11/30/object-allocations-on-the-web-2/?like=1" /> \
							<input type="hidden" name="wpl_rand" value="d1da19d381" /> \
							<p>Not a member yet? <a href="http://wordpress.com/signup/?ref=likebox" id="wpl-signup-link">Sign up with WordPress.com</a></p> \
						</form> \
					</div> \
				');
				
				jQuery('#wpl-mustlogin').hide().slideDown('fast');
			} );
			
			jQuery('#wpl-mustlogin input.input').live( 'focus', function() {
				jQuery(this).prev().hide();
			}).live( 'blur', function() {
				if ( jQuery(this).val() == '' )
					jQuery(this).prev().show();
			});
			
			jQuery('#wpl-mustlogin input#wp-submit').live( 'click', function(e) {
				e.preventDefault();
				
				jQuery.post( 'http://evanweaver.wordpress.com/wp-admin/admin-ajax.php', { 
					'action': 'wpl_record_stat',
					'stat_name': 'loggedout_login_submit'
				}, function() {
					jQuery('#wpl-mustlogin form').submit();
				} );
			});			
			
			jQuery('#wpl-mustlogin a#wpl-signup-link').live( 'click', function(e) {
				e.preventDefault();
				
				var link = jQuery(this).attr('href');
				
				jQuery.post( 'http://evanweaver.wordpress.com/wp-admin/admin-ajax.php', { 
					'action': 'wpl_record_stat',
					'stat_name': 'loggedout_signup_click'
				}, function() {
					location.href = link;
				} );
			});					
			
		});
	/* ]]> */
	</script>
<script type="text/javascript">_qoptions={qacct:'p-18-mFEk4J448M',labels:'language.en,type.wpcom'};</script>
<script type="text/javascript" src="index_files/quant.js"></script>
<noscript><p><img class="robots-nocontent" src="http://pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif?labels=language.en%2Ctype.wpcom" style="display:none" height="1" width="1" alt="" /></p></noscript>
<script type="text/javascript" src="index_files/gprofiles.js"></script>
	<script type="text/javascript">	
	// <![CDATA[
	WPGroHo = {
		data: {},
		renderers: {},
		syncProfileData: function( hash, id ) {
			if ( !WPGroHo.data[hash] ) {
				WPGroHo.data[hash] = {};
				a = jQuery( 'div.grofile-hash-map-' + hash + ' span' ).each( function() {
					WPGroHo.data[hash][this.className] = jQuery( this ).text();
				} );
			}

			WPGroHo.appendProfileData( WPGroHo.data[hash], hash, id );
		},
		appendProfileData: function( data, hash, id ) {
			for ( var key in data ) {
				if ( jQuery.isFunction( WPGroHo.renderers[key] ) ) {
					return WPGroHo.renderers[key]( data[key], hash, id, key );
				}

				jQuery( '#' + id ).find( 'h4' ).after( jQuery( '<p class="grav-extra ' + key + '" />' ).html( data[key] ) );
			}
		}
	};
	jQuery(document).ready(function($){
		Gravatar.profile_cb = function( h, d ) {
			WPGroHo.syncProfileData( h, d );
		};
		Gravatar.attach_profiles();
	});
	// ]]>
	</script>
	<div style="display: none;">
	</div>
<script type="text/javascript" src="index_files/beacon.js"></script><script type="text/javascript">try{COMSCORE.beacon({c1:2,c2:7518284});}catch(e){}</script><noscript><p class="robots-nocontent"><img src="http://b.scorecardresearch.com/p?cj=1c1=2&#038;c2=7518284" alt="" style="display:none" width="1" height="1" /></p></noscript><script src="index_files/w.js" type="text/javascript"></script>
<script type="text/javascript">
st_go({'blog':'18067431','v':'wpcom','user_id':'0','post':'295','subd':'evanweaver'});
ex_go({'crypt':'RDZ8LFkxbXFOeC15QSsxaTNDWXZUUnldZEdZQSw3eUp1TGw9OE56K0h+SFc/UGo1UDk2MyxNUm8yZHJBWWhHRlF5Mlllc29tY0RIbzl2ZFhLLl85UWkmJnV8aXxfSyZfTHolWG5UU1daK0RKLiZxLiVwSDI0SVlZSy8/Z2xYaHBRNy5UaF1UNjV4UzFpUlB0Ji9qVC4sR3hRfkRNYXQ/bDkwMm41M0w5T0ola1dLRzZFLEE3dmt5em4xVUR1NUJhWnksNE5TQWhNZDVGRXZdNF1IWWIsQldGbzd6YjhQam1qSmlROFstTXMvWU5saUFXdllTNm0mVEdZRnYlZ2UmS1M='});
addLoadEvent(function(){linktracker_init('18067431',295);});
	</script><img id="wpstats" src="index_files/g.gif" alt=""><img id="wpstats2" src="index_files/g_002.gif" alt="" style="display: none;">

</body></html>